/**
 * jquery-ahm: ajax html modification jquery plugin
 * 
 * @author    Sergey <parf@comfi.com>, Jusun <jusun@comfi.com>
 * @copyright 2011 Comfi.com, Sergey Porfiriev, Jusun Lee 
 * @license   MIT License: http://www.jqueryahm.com/license
 * @version   1.1.0
 * @requires  jQuery 1.5+
 */
jQuery.extend({ahm:function(b,g,c){var d={url:b,data:g,dataType:"json"};if(c){$.extend(d,c)}var e=$.ajax(d);e.success(function(h){$.each(h,function(k,m){var j=k.split("/");var i=j[0];var l=j[1]?j[1]:"html";a(i,l,m)})});var a=function(h,j,k){$.each(k,function(l,m){if(typeof m=="string"&&m.indexOf("function")==0){k[l]=window["eval"]("("+m+")")}});if(h){var i=$(h)}else{if(jQuery[j]){var i=jQuery}else{if(window[j]){var i=window}else{if((f=window["eval"](j))&&(j="custom")){var i={custom:f}}else{return alert("ahm: undefined callback="+j)}}}}if(typeof i[j]=="function"){if($.isArray(k)){i[j]["apply"](i,k)}else{if(k){i[j](k)}else{i[j]()}}}else{i[j]=k}};return false},ahm_form:function(d,b){var d=$(d);if(d.is("form")==false){d=d.closest("form")}var a=d.find(":submit");var e=a.attr("value");var c={type:d.attr("method"),beforeSend:function(h,g){a.attr("value","Please wait...").attr("disabled","disabled")},complete:function(g,h){a.removeAttr("disabled").attr("value",e)}};$.extend(c,b);return $.ahm(d.attr("action"),d.serialize(),c)}});$(function(){$("a.ahm").click(function(){return $.ahm(this.href)});$("form.ahm").submit(function(){return $.ahm_form(this)})});