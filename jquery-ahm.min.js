/**
 * jquery-ahm: ajax html modification jquery plugin
 * 
 * @author    Sergey <parf@comfi.com>, Jusun <jusun@comfi.com>
 * @copyright 2011 Comfi.com, Sergey Porfiriev, Jusun Lee 
 * @license   MIT License: http://www.jqueryahm.com/license
 * @version   1.3.0
 * @requires  jQuery 1.5+
 */
jQuery.extend({ahm:function(b,c){var d={url:b,dataType:"json"};if(c){$.extend(d,c)}var e=$.ajax(d);e.success(function(g){$.each(g,function(j,l){var i=j.split("/");var h=i[0];var k=i[1]?i[1]:"html";a(h,k,l)})});var a=function(g,i,j){if(typeof j=="object"){$.each(j,function(k,l){if(typeof l=="string"&&l.indexOf("function")==0){j[k]=window["eval"]("("+l+")")}else{if(l=="this"){j[k]=c.context}}})}if(g=="this"){g=c.context}if(j=="this"){j=c.context}if(g){var h=$(g)}else{if(jQuery[i]){var h=jQuery}else{if(window[i]){var h=window}else{if((f=window["eval"](i))&&(i="custom")){var h={custom:f}}else{return alert("ahm: undefined callback="+i)}}}}if(typeof h[i]=="function"){if($.isArray(j)){h[i]["apply"](h,j)}else{if(j){h[i](j)}else{h[i]()}}}else{h[i]=j}};return false},ahm_form:function(d,b){var d=$(d);if(d.is("form")==false){d=d.closest("form")}var a=d.find(":submit");var c={type:d.attr("method"),data:d.serialize(),context:d,beforeSend:function(g,e){a.attr("disabled","disabled")},complete:function(e,g){a.removeAttr("disabled")}};$.extend(c,b);return $.ahm(d.attr("action"),c)},ahm_loaded:[],ahm_load:function(a){if($.ahm_loaded.indexOf(a)==-1){$.ahm_loaded.push(a);$.ajax({url:a,async:false,dataType:"script"})}}});$(function(){$("a.ahm").click(function(){return $.ahm(this.href,{context:this})});$("form.ahm").submit(function(){return $.ahm_form(this)})});